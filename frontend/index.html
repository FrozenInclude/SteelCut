<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <title>SteelCut | 철강 절단 계산기</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <!-- Custom -->
    <link rel="stylesheet" href="./css/style.css">
</head>

<body>
    <!-- 네비게이션 바 -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark py-2">
        <div class="container-fluid">
            <a class="navbar-brand fs-5" href="#">SteelCut</a>
            <div class="d-flex">
                <button class="btn btn-outline-light btn-sm me-2">로그인</button>
                <button class="btn btn-outline-light btn-sm">회원가입</button>
            </div>
        </div>
    </nav>

    <!-- 절단기 설정 섹션 -->
    <section class="container my-3">
        <div class="card shadow-sm">
            <div class="card-header d-flex justify-content-between align-items-center py-2">
                <strong class="fs-6">절단기 설정</strong>
                <div class="form-check form-switch m-0">
                    <input class="form-check-input" type="checkbox" id="lockSettings">
                    <label class="form-check-label small" for="lockSettings">설정 고정</label>
                </div>
            </div>
            <div class="card-body py-2">
                <div class="row g-2">
                    <div class="col-12 col-md-4">
                        <label for="kerf" class="form-label small mb-1">톱손실 (Kerf)</label>
                        <div class="input-group input-group-sm">
                            <input type="number" class="form-control text-end" id="kerf" min="0" step="0.1"
                                placeholder="기본값: 0">
                            <span class="input-group-text">mm</span>
                        </div>
                    </div>
                    <div class="col-6 col-md-4">
                        <label for="maxHeight" class="form-label small mb-1">최대 적재 높이</label>
                        <div class="input-group input-group-sm">
                            <input type="number" class="form-control text-end" id="maxHeight" min="0" step="1"
                                placeholder="예: 600">
                            <span class="input-group-text">mm</span>
                        </div>
                    </div>
                    <div class="col-6 col-md-4">
                        <label for="maxWidth" class="form-label small mb-1">최대 적재 넓이</label>
                        <div class="input-group input-group-sm">
                            <input type="number" class="form-control text-end" id="maxWidth" min="0" step="1"
                                placeholder="예: 800">
                            <span class="input-group-text">mm</span>
                        </div>
                    </div>
                </div>
                <div class="d-flex justify-content-end gap-2 mt-2">
                    <button type="button" id="resetSettings" class="btn btn-outline-secondary btn-sm">초기화</button>
                    <button type="button" id="applySettings" class="btn btn-primary btn-sm">적용</button>
                </div>
            </div>
        </div>
    </section>

    <!-- 발주 섹션 -->
    <main class="container my-3">
        <div class="card shadow-sm">
            <div class="card-header d-flex justify-content-between align-items-center py-2">
                <strong class="fs-6">발주 항목</strong>
            </div>

            <form id="inputForm">
                <div class="input-table-wrapper">
                    <table class="table table-bordered table-sm table-hover input-table align-middle mb-0">
                        <colgroup>
                            <col style="width:14%">
                            <col style="width:26%">
                            <col style="width:14%">
                            <col style="width:14%">
                            <col style="width:12%">
                            <col style="width:8%">
                        </colgroup>
                        <thead>
                            <tr>
                                <th scope="col">품명</th>
                                <th scope="col">규격</th>
                                <th scope="col">원자재길이</th>
                                <th scope="col">발주길이</th>
                                <th scope="col">발주수량</th>
                                <th scope="col"></th>
                            </tr>
                        </thead>
                        <tbody id="formRows">
                            <!-- JS가 사용하는 템플릿/행 복제 전략이 있을 수 있어 초기 상태는 비워둠 -->
                            <tr class="input-row"></tr>
                        </tbody>
                    </table>
                </div>
            </form>

            <div class="d-flex justify-content-end gap-2 mt-2 px-3 py-2">
                <button type="button" class="btn btn-outline-secondary btn-sm" data-bs-toggle="modal"
                    data-bs-target="#addItemModal">추가</button>
                <button type="button" id="calcBtn" class="btn btn-primary btn-sm">계산</button>
            </div>
        </div>
    </main>

    <section class="container my-3">
        <div class="card shadow-sm">
            <div class="card-header d-flex justify-content-between align-items-center py-2">
                <strong class="fs-6">계산 결과</strong>
                <div class="d-flex gap-2">
                    <button type="button" class="btn btn-outline-secondary btn-sm" id="resetOrders">초기화</button>
                    <button type="button" class="btn btn-outline-primary btn-sm" id="exportResults">내보내기</button>
                </div>
            </div>

            <!-- 요약 카드 (선택) : 추후 JS로 숫자만 채워도 됨 -->
            <div class="px-3 pt-2">
                <div class="row g-2">
                    <div class="col-6 col-md-3">
                        <div class="border rounded-3 p-2 small">
                            <div class="text-muted">총 투입본수</div>
                            <div class="fw-semibold" id="sumInputBars">0</div>
                        </div>
                    </div>
                    <div class="col-6 col-md-3">
                        <div class="border rounded-3 p-2 small">
                            <div class="text-muted">총 절단품수</div>
                            <div class="fw-semibold" id="sumPieces">0</div>
                        </div>
                    </div>
                    <div class="col-6 col-md-3">
                        <div class="border rounded-3 p-2 small">
                            <div class="text-muted">총 로스 (mm)</div>
                            <div class="fw-semibold" id="sumLoss">0</div>
                        </div>
                    </div>
                    <div class="col-6 col-md-3">
                        <div class="border rounded-3 p-2 small">
                            <div class="text-muted">총시간 (분)</div>
                            <div class="fw-semibold" id="sumTime">0</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="table-responsive result-table-wrapper mt-2">
                <table class="table table-bordered table-sm table-hover mb-0 result-table align-middle text-nowrap">
                    <colgroup>
                        <col style="width:40px">
                        <col style="width:120px">
                        <col style="width:160px">
                        <col style="width:120px">
                        <col style="width:120px">
                        <col style="width:90px">
                        <col style="width:110px">
                        <col style="width:110px">
                        <col style="width:110px">
                        <col style="width:110px">
                        <col style="width:110px">
                        <col style="width:90px">
                        <col style="width:90px">
                        <col style="width:100px">
                        <col style="width:80px">
                        <col style="width:110px">
                    </colgroup>
                    <thead class="align-middle text-center small">
                        <tr>
                            <th rowspan="2">#</th>
                            <th rowspan="2">품명</th>
                            <th rowspan="2">규격</th>
                            <th colspan="3" class="bg-light">발주</th>
                            <th colspan="2" class="bg-light">본당</th>
                            <th colspan="4" class="bg-light">총계</th>
                            <th colspan="5" class="bg-light">시간</th>
                        </tr>
                        <tr>
                            <th>투입길이<br><small class="text-muted">(mm)</small></th>
                            <th>발주길이<br><small class="text-muted">(mm)</small></th>
                            <th>발주수량</th>

                            <th>절단품수</th>
                            <th>로스<br><small class="text-muted">(mm)</small></th>

                            <th>투입본수</th>
                            <th>절단품수</th>
                            <th>로스<br><small class="text-muted">(mm)</small></th>
                            <th>잉여본수</th>

                            <th>높이<br><small class="text-muted">(mm)</small></th>
                            <th>속도</th>
                            <th>시간<br><small class="text-muted">(분/본)</small></th>
                            <th>컷팅수</th>
                            <th>총시간<br><small class="text-muted">(분)</small></th>
                        </tr>
                    </thead>
                    <tbody id="resultRows">
                        <!-- 계산 전 빈 상태 -->
                        <tr class="text-center text-muted">
                            <td colspan="17" class="py-4">결과가 없습니다. 상단에서 항목을 추가하고 ‘계산’을 눌러주세요.</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </section>

    <!-- 푸터 -->
    <footer class="bg-light text-center text-muted py-2 small">© SteelCut</footer>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script type="module" src="./js/main.js"></script>

    <!-- Toast -->
    <div id="toast-container" style="position: fixed; bottom: 1rem; right: 1rem; z-index: 9999;"></div>

    <!-- 장바구니 추가 모달 -->
    <div class="modal fade" id="addItemModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content">
                <div class="modal-header py-2">
                    <h5 class="modal-title">철강 추가</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="닫기"></button>
                </div>

                <div class="modal-body">
                    <div class="row g-3">
                        <!-- 제품 선택 -->
                        <div class="col-12">
                            <label class="form-label small mb-1">제품선택</label>
                            <select id="modalProduct" class="form-select form-select-sm">
                                <option selected disabled>선택</option>
                            </select>
                        </div>

                        <!-- 규격 선택 -->
                        <div class="col-12">
                            <label class="form-label small mb-1">규격</label>
                            <select id="modalSpec" class="form-select form-select-sm" disabled>
                                <option selected disabled>선택</option>
                            </select>
                        </div>

                        <!-- 길이 / 수량 -->
                        <div class="col-6 col-md-4">
                            <label class="form-label small mb-1">원자재길이(mm)</label>
                            <select id="modalRawLen" class="form-select form-select-sm" disabled>
                                <option selected disabled>선택</option>
                            </select>
                        </div>
                        <div class="col-6 col-md-4">
                            <label class="form-label small mb-1">발주길이(mm)</label>
                            <input id="modalOrderLen" type="number" class="form-control form-control-sm" min="1"
                                step="1" disabled>
                        </div>
                        <div class="col-6 col-md-4">
                            <label class="form-label small mb-1">수량(Ea)</label>
                            <input id="modalQty" type="number" class="form-control form-control-sm" min="1" step="1"
                                disabled>
                        </div>
                    </div>
                </div>

                <div class="modal-footer py-2">
                    <button type="button" class="btn btn-outline-secondary btn-sm" data-bs-dismiss="modal">취소</button>
                    <button type="button" class="btn btn-primary btn-sm" id="modalAddConfirm">추가</button>
                </div>
            </div>
        </div>
    </div>
</body>

</html>